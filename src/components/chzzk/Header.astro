---
import {ChzzkProfile} from '@/components/chzzk/profile'
import {getChannel, getUser} from '@/lib/chzzk'

const user = await getUser(Astro.cookies.get('accessToken')?.value)
if (!user.content) return false

console.log('User:', user)
const channel = await getChannel([user.content.channelId], Astro.locals)
if (!channel.content) return false

console.log('Channel:', channel)
console.log('Channel Data:', channel.content.data)
---

<section>
  <ChzzkProfile channel={channel} client:load />
</section>

<style lang="sass">
  @reference '@/styles/global.css'

  section
    @apply flex my-4
</style>
